(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,a,t){e.exports=t.p+"static/media/AirlyBlue.198d14d3.png"},function(e,a,t){e.exports=t.p+"static/media/Loader.7aa6373b.svg"},function(e,a,t){e.exports=t(13)},,,,,,function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(3),i=t.n(s),c=t(1),l=function(e){var a=Object(n.useState)(""),t=Object(c.a)(a,2),s=t[0],i=t[1];return r.a.createElement("form",{className:"search"},r.a.createElement("input",{className:"search--input",minLength:"2",maxLength:"40",value:s,onChange:function(e){i(e.target.value)},type:"text"}),r.a.createElement("input",{className:"search--btn",onClick:function(a){e.search(a,s),i("")},type:"submit",value:"Take a Breath!"}))},o=t(4),m=t.n(o),h=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header--title"},"Take a Breath!"),r.a.createElement("p",{className:"header--description"},"This app is meant to give you an idea about air condition in different polish cities. It operates thanks to three different APIs listed below."),r.a.createElement("ol",{className:"header--list"},r.a.createElement("li",{className:"header--listItem"},"Airly for gathering pollution indexes ",r.a.createElement("a",{className:"header--link",target:"blank",href:"https://airly.eu"}," (read more) ",r.a.createElement("img",{className:"header--airly",src:m.a,alt:"airly logo"}))," "),r.a.createElement("li",{className:"header--listItem"},"Nominatim for gathering geolocation information ",r.a.createElement("a",{className:"header--link",target:"blank",href:"https://nominatim.org"},"(read more)")," "),r.a.createElement("li",{className:"header--listItem"},"IP-API for getting the initial state of the app with your current location ",r.a.createElement("a",{className:"header--link",target:"blank",href:"http://ip-api.com"},"(read more)"),". The web is quite a complicated place, so sometimes this API will mistake your current location with something rather odd.")))},f=function(){return r.a.createElement("div",{className:"parameters"},r.a.createElement("h2",{className:"parameters--title"},"Parameters"),r.a.createElement("p",{className:"parameters--description"},"Some sensors provided by the API output more information, some less. The main three values that are predominant in most measurements are PM2.5, PM10 and PM1."),r.a.createElement("p",{className:"parameters--description"},"PM1 is the most toxic. Due to its size it may percolate dirrectly to the bloodstream of the person inhaling it. PM2.5 is slightly bigger, and as such gets stuck in the alveoli of human (and non-human) lungs. PM10 is the most common one and stays inside the lungs, without entering the alveoli or bloodstream dirrectly. "),r.a.createElement("p",{className:"parameters--description"},'The search engine will provide you with the nearest station\'s sensor output. Be aware, that it is sensitive to diacritic signs ("\u0144", "\u0105" and others) - if you search for Poznan instead of Pozna\u0144 - it will still find your destination, but the search engine might get confused sometimes.'))},u=function(e){return r.a.createElement("div",{className:"fetchedInfo"},e.searched===e.city?r.a.createElement("h3",{className:"fetchedInfo--title"}," Sensors in ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.searched)," found! "):r.a.createElement("h3",{className:"fetchedInfo--title"},"No sensors in the exact location (",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.searched),")"),e.searched===e.city?r.a.createElement("p",{className:"fetchedInfo--basic"},"We have sensors in ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.city),". ",e.airState):r.a.createElement("p",{className:"fetchedInfo--basic"},r.a.createElement("span",{className:"fetchedInfo--reminder"}," The nearest sensor we found is in ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.city),".")," ",e.airState," "),r.a.createElement("p",{className:"fetchedInfo--basic"}," The measurements for ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.city)," you'll find below are based on what we analyzed on ",r.a.createElement("span",{className:"fetchedInfo--capitalize"}," ",e.sensorPlace," ")," street, but there might be other sensors over at ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.city),". If you want to try, you can add a street name to the search."),r.a.createElement("h4",{className:"fetchedInfo--subtitle"},"Here is what we got:"),r.a.createElement("ul",{className:"fetchedInfo--measured"},e.measuredValues.length>0?e.measuredValues.map(function(e){return r.a.createElement("li",{className:"fetchedInfo--specific",style:(a=e.name,t=e.value,"PM25"===a&&t<25?{background:"linear-gradient(to right, #1e960080 80%, #fff20080, #ff000080)"}:"PM25"===a&&t>=25&&t<=40?{background:"linear-gradient(to right, #1e960080 20%, #fff20080 80%, #ff000080 )"}:"PM25"===a&&t>40?{background:"linear-gradient(to right, #1e960080, #fff20080, #ff000080 20%)"}:"PM10"===a&&t<50?{background:"linear-gradient(to right, #1e960080 80%, #fff20080, #ff000080)"}:"PM10"===a&&t>=50&&t<=80?{background:"linear-gradient(to right, #1e960080 20%, #fff20080 80%, #ff000080)"}:"PM10"===a&&t>80?{background:"linear-gradient(to right, #1e960080, #fff20080, #ff000080 20%)"}:void 0),key:e.name},e.name," : ",e.value);var a,t}):r.a.createElement("li",null,"Strange, but it seams sensors for ",r.a.createElement("span",{className:"fetchedInfo--capitalize"},e.searched," "),"  are currently unavailable. Sorry for the inconveniance. ")),r.a.createElement("p",{className:"fetchedInfo--basic"},"The WHO norms for PM2.5 is 25 \u03bcg/m3, for PM10 50 \u03bcg/m3. Ultrafine particles (PM1) are still under investigation, as the norm is hard to identify."))},d=function(e){return r.a.createElement("div",{className:"failedSearch"},r.a.createElement("h4",{className:"failedSearch--title"},"Hold up!"),r.a.createElement("p",{className:"failedSearch--info"},"Are you sure you were searching for a place inside Poland? "),"     ")},p=t(5),g=t.n(p),E=function(){return r.a.createElement("div",{className:"preloader"},r.a.createElement("h2",{className:"preloader--title"},"Breathing in the data"),r.a.createElement("img",{className:"preloader--spinner",src:g.a,alt:"preloader spinner"}))},b=(t(12),function(){var e=Object(n.useState)(""),a=Object(c.a)(e,2),t=a[0],s=a[1],i=Object(n.useState)(""),o=Object(c.a)(i,2),m=o[0],p=o[1],g=Object(n.useState)(""),b=Object(c.a)(g,2),N=b[0],y=b[1],v=Object(n.useState)(""),I=Object(c.a)(v,2),w=I[0],P=I[1],k=Object(n.useState)([]),j=Object(c.a)(k,2),O=j[0],M=j[1],S=Object(n.useState)(!1),x=Object(c.a)(S,2),A=x[0],z=x[1],T=Object(n.useState)(null),B=Object(c.a)(T,2),C=B[0],L=B[1];Object(n.useEffect)(function(){fetch(" http://ip-api.com/json/").then(function(e){if(!e.ok)throw e;e.json()}).then(function(e){V(null,e.city)}).catch(function(e){return console.log(e)})},[]);var V=function(e,a){e&&e.preventDefault(),a.length>2&""!==a&&(L(!0),fetch("https://nominatim.openstreetmap.org/search?q=".concat(a,"&format=json&limit=1&namedetails=1")).then(function(e){return e.json()}).then(function(e){e[0]?(z(!0),D(Number(e[0].lat).toFixed(2),Number(e[0].lon).toFixed(2)),s(a.toLowerCase())):(L(!1),z(!1))}))},D=function(e,a){e>49.04&&e<54.84&&a>14.12&&a<24.15?H(e,a):(setTimeout(function(){L(!1)},1e3),z(!1))},H=function(e,a){var t={Accept:"application/json",Apikey:"".concat("0QMeVpdC5bNVH7xwQlkEOZJ9FYBB5NCa"),"Accept-Language":"en"},n=fetch("https://airapi.airly.eu/v2/measurements/nearest?lat=".concat(e,"&lng=").concat(a,"&maxResults=3&maxDistanceKM=100"),{headers:t}),r=fetch("https://airapi.airly.eu/v2/installations/nearest?lat=".concat(e,"&lng=").concat(a,"&maxResults=3&maxDistanceKM=100"),{headers:t});Promise.all([n,r]).then(function(e){return Promise.all(e.map(function(e){return e.json()}))}).then(function(e){p(e[1][0].address.city.toLowerCase()),y(e[0].current.indexes[0].description),P(e[1][0].address.street?e[1][0].address.street:"a not specified"),M(e[0].current.values),setTimeout(function(){L(!1)},1e3)})};return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App__info"},r.a.createElement(h,null),r.a.createElement(f,null)),r.a.createElement("div",{className:"App__results"},r.a.createElement(l,{search:V}),C?r.a.createElement(E,null):A?r.a.createElement(u,{searched:t,city:m,airState:N,sensorPlace:w,measuredValues:O}):r.a.createElement(d,null)))});i.a.render(r.a.createElement(b,null),document.getElementById("root"))}],[[6,1,2]]]);
//# sourceMappingURL=main.dcc975ad.chunk.js.map